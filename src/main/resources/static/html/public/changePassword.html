<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kayıt Ol</title>
    <link rel="stylesheet" href="../../css/table.css" type="text/css" media="screen, projection"/>
    <link rel="stylesheet" href="../../jquery.ui/jquery-ui.css" type="text/css" media="screen, projection"/>
    <link rel="stylesheet" href="../../bootstrap/bootstrap.min.css" type="text/css" media="screen, projection"/>
    <script type="text/javascript" src="../../jquery.ui/jquery-3.7.1.js"></script>
    <script type="text/javascript" src="../../jquery.ui/jquery-ui.js"></script>
    <style>
        .divider:after,
        .divider:before {
            content: "";
            flex: 1;
            height: 1px;
            background: #eee;
        }
        .h-custom {
            height: calc(100% - 73px);
        }
        @media (max-width: 450px) {
            .h-custom {
                height: 100%;
            }
        }
        .error-message {
            color: red;
            margin-top: 10px;
        }
    </style>
    <script>
        function kayitOl() {
            // Önceki hata mesajlarını temizle
            $('.error-message').remove();

            var email = $('#email').val();
            var oldPasswd = $('#oldPasswd').val();
            var newPasswd = $('#newPasswd').val();
            var confirmPasswd = $('#confirmPasswd').val();

            $.ajax({
                type: "POST",
                url: '/changePassword', // Backend register endpoint
                data: JSON.stringify({
                    email: email,
                    oldPasswd: oldPasswd,
                    newPasswd: newPasswd,
                    confirmPasswd: confirmPasswd
                }),
                contentType: "application/json",
                success: function (response) {
                    alert(response);
                    window.location.href = 'login'; // Giriş sayfasına yönlendir
                },
                error: function (xhr) {

                    console.log(xhr);
                }
            });
        }
    </script>
</head>
<body>
<section class="vh-100">
    <div class="container-fluid h-custom">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="breadcrumb"><a href="/static">Home</a><span class="sep">></span>Change Password</div>
            <div class="col-md-9 col-lg-6 col-xl-5">
                <img src="../../img/logo.png" class="img-fluid" style="max-width: 30%;" alt="Sample image"> <b>TechZone</b>
            </div>
            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
                <form>
                    <!-- Email input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="email">Email</label>
                        <input type="email" id="email" class="form-control form-control-lg" placeholder="Email Address" required />
                    </div>

                    <!-- Phone Number input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="oldPasswd">Old Password</label>
                        <input type="text" id="oldPasswd" class="form-control form-control-lg" placeholder="Old Password" required />

                    </div>

                    <!-- newPasswd input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="newPasswd">New Password</label>
                        <input type="text" id="newPasswd" class="form-control form-control-lg" placeholder="New  Password" required />

                    </div>

                    <!-- confirmPasswd input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="confirmPasswd">Confirm Password</label>
                        <input type="confirmPasswd" id="confirmPasswd" class="form-control form-control-lg" placeholder="Confirm Password" required />

                    </div>

                    <div class="text-center text-lg-start mt-4 pt-2">
                        <button type="button" class="btn btn-primary btn-lg" onclick="kayitOl()">Save</button>
                    </div>

                    <div class="text-center">
                        <p class="mt-3">Already have an account? <a href="login">Login here</a></p>
                    </div>
                </form>

            </div>
        </div>
    </div>
</section>
</body>
</html>
